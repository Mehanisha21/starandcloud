<div class="goods-receipt-container">
  <div class="goods-receipt-header-filters-wrapper">
    <div class="goods-receipt-filters">
      <h2>Goods Receipts</h2>
      <label>
        From:
        <input
          type="date"
          [(ngModel)]="filters.dateFrom"
          (change)="applyFilters()"
          class="form-control filter-input"
        />
      </label>
      <label>
        To:
        <input
          type="date"
          [(ngModel)]="filters.dateTo"
          (change)="applyFilters()"
          class="form-control filter-input"
        />
      </label>


      <label for="sortFieldSelect" class="sort-label">Sort by: <select id="sortFieldSelect"
                class="sort-dropdown"
                [(ngModel)]="selectedSortField"
                (change)="onSortFieldChange()">
          <option *ngFor="let field of sortFields" [value]="field.value">{{ field.label }}</option>
        </select>
      </label>
      <button type="button" class="sort-direction-btn" (click)="toggleSortDirection()" title="Toggle Asc/Desc">
          {{ sortDirection === 'asc' ? '▲' : '▼' }}
        </button>
      <!-- Search -->

      <div class="search-bar">
        <input
          type="text"
          placeholder="Search..."
          [(ngModel)]="filters.searchTerm"
          (input)="applyFilters()"
        />
      </div>
    </div>
  </div>

  <div *ngIf="isLoading" class="loading-message">
    Loading goods receipts...
  </div>

  <div *ngIf="!isLoading && errorMsg" class="alert alert-warning">
    {{ errorMsg }}
  </div>

  <ng-container *ngIf="!isLoading && !errorMsg && filteredGoodsReceipts.length > 0">
    <div class="goods-receipt-table-wrapper">
      <table class="goods-receipt-table">
        <thead>
          <tr>
            <th>Document No</th>
            <th>Vendor ID</th>
            <th>Posting Date</th>
            <th>Document Date</th>
            <th>Document Type</th>
            <th>PO No</th>
            <th>PO Item</th>
            <th>Material No</th>
            <th>Description</th>
            <th>Movement Type</th>
            <th>Unit of Measure</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let receipt of filteredGoodsReceipts">
            <td data-label="Document No">{{ receipt.documentNo }}</td>
            <td data-label="Vendor ID">{{ receipt.vendorId }}</td>
            <td data-label="Posting Date">{{ receipt.postingDate | date:'mediumDate' }}</td>
            <td data-label="Document Date">{{ receipt.documentDate | date:'mediumDate' }}</td>
            <td data-label="Document Type">{{ receipt.documentType }}</td>
            <td data-label="Purchase Order No">{{ receipt.purchaseOrderNo }}</td>
            <td data-label="PO Item">{{ receipt.purchaseOrderItem }}</td>
            <td data-label="Material No">{{ receipt.materialNo }}</td>
            <td data-label="Description">{{ receipt.description }}</td>
            <td data-label="Movement Type">{{ receipt.movementType }}</td>
            <td data-label="Unit of Measure">{{ receipt.unitOfMeasure }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>

  <div *ngIf="!isLoading && !errorMsg && filteredGoodsReceipts.length === 0" class="no-data-message">
    No goods receipts to display.
  </div>
</div>
